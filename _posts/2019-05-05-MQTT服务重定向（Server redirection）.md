---
layout: splash
title:  "MQTT v5服务器重定向（Server redirection）"
date:   2019-05-05 11:17:44 +0800
categories: MQTT
header:
  overlay_image: /assets/images/IMGP8176.jpg
excerpt: >
     
tags: 
  - MQTT
---
# 服务器重定向（Server redirection）
服务器可以通过发送`CONNACK`或`DISCONNECT`与原因代码`0x9C`（使用其他服务器）或`0x9D`（服务器移动）来请求客户端使用另一个服务器。发送其中一个原因代码时，服务器可能还包括一个服务器引用（Server Reference）属性，以指示客户端应该使用的服务器或服务器的位置。

原因代码`0x9C`（使用其他服务器）指定客户端应该临时切换到使用另一个服务器。另一台服务器要么已为客户端所知，要么使用服务器引用（Server Reference）指定。

服务器引用（Server Reference）是UTF-8编码字符串。此字符串的值是以空格分隔的引用列表。此处未指定引用的格式。

*非规范评注*

    建议每个引用都包含一个名称，后面跟一个冒号和一个端口号。如果名称包含冒号，则名称字符串可以括在方括号内（“[”和“]”）。方括号括起来的名称不能包含右方括号（“]”）字符。这用于表示使用冒号分隔符的IPv6文字地址。这是[RFC3986]中描述的URI权限的简化版本。

*非规范评注*

    服务器引用中的名称通常为主机名，DNS名称，SRV名称或IP地址。冒号分隔符后面通常是十进制的端口号。如果端口信息来自名称解析（如SRV）或默认，则不需要这样做。

*非规范评注*

    如果给出了多个引用，则期望客户端将选择其中的一个引用。

*非规范评注*

    服务器参考的几个例子
     myserver.xyz.org
     myserver.xyz.org:8883
     10.10.151.22:8883 [fe80::9610:3eff:fe1c]:1883

允许服务器不发送服务器引用，并允许客户端忽略服务器引用。此功能可用于允许负载平衡，服务器重定位和客户端配置到服务器。
